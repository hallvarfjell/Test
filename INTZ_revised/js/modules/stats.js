
import { Store } from '../store.js';
import { fmtTime, avg } from '../helpers.js';
export function renderStats(){ const host=document.getElementById('app'); const options=[...new Set(Store.data.sessions.map(s=> s.workoutName))]; host.innerHTML=`<section class='panel'><h3>Sammenlign like økter</h3><label>Øktetype <select id='selType' class='input'>${options.map(o=>`<option value='${o}'>${o}</option>`).join('')}</select></label><div style='margin-top:1rem'><table class='table'><thead><tr><th>Dato</th><th>Varighet</th><th>Snitt HR (arbeid)</th><th>Snitt fart (arbeid)</th></tr></thead><tbody id='tbl'></tbody></table></div></section>`; function fill(){ const type=document.getElementById('selType').value; const rows=Store.data.sessions.filter(s=> s.workoutName===type).slice(-5); document.getElementById('tbl').innerHTML=rows.map(s=>{ const workHr=avg(s.drags.filter(d=>d.phase==='arbeid').map(d=>d.avgHr||0)); const workSpd=avg(s.drags.filter(d=>d.phase==='arbeid').map(d=>d.avgSpeed||0)); return `<tr><td>${new Date(s.startedAt).toLocaleString()}</td><td>${fmtTime(s.summary?.durationSec||0)}</td><td>${isFinite(workHr)? Math.round(workHr):'—'} bpm</td><td>${isFinite(workSpd)? workSpd.toFixed(1):'—'} km/t</td></tr>`; }).join(''); } document.getElementById('selType').onchange=fill; fill(); }
